{"version":3,"sources":["register.js"],"names":["ModuleListenList","appendModuleRequires","coverNgModule","createInvoke","isRegister","moduleProxy","register","registerCache","angular","module","isBootstrap","modules","moduleName","indexOf","method","_i","_len","push","name","length","$isProxy","invokeQueue","normal","isFunction","Error","result","apply","arguments","requires","appendList","baseRequires","req","Array","prototype","normalModule","fn","directive","restrict","compile","provider","$provide","$controllerProvider","$compileProvider","$filterProvider","$injector","$animateProvider","invokeLater","providerCache","providers","registerFunction","runLater","self","this","getInstanceInjector","injector","pname","cacheName","rs","enableDistinst","args","instance","slice","call","invoke","factory","service","value","constant","animation","filter","controller","config","run","rFn","$get","$rootElement","instanceInjector","data"],"mappings":"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","file":"register.min.js","sourcesContent":["(function() {\n  var ModuleListenList, appendModuleRequires, coverNgModule, createInvoke, isRegister, moduleProxy, register, registerCache;\n\n  register = angular.module('angular.lazy.register', ['ng']);\n\n  register.isBootstrap = false;\n\n  registerCache = {\n    modules: ['ng']\n  };\n\n  register.isRegister = isRegister = function(moduleName) {\n    return registerCache.modules.indexOf(moduleName) !== -1;\n  };\n\n  ModuleListenList = ['provider', 'factory', 'service', 'value', 'constant', 'animation', 'filter', 'controller', 'directive', 'config', 'run'];\n\n  moduleProxy = function(module) {\n    var method, _i, _len;\n    registerCache.modules.push(module.name);\n    for (_i = 0, _len = ModuleListenList.length; _i < _len; _i++) {\n      method = ModuleListenList[_i];\n      module[method] = createInvoke(module, method);\n    }\n    module.$isProxy = true;\n    return module;\n  };\n\n  createInvoke = function(module, method) {\n    var invokeQueue, normal;\n    normal = module[method];\n    if (!normal || !angular.isFunction(normal)) {\n      throw new Error(\"badmethod  no method \" + method + \" name\");\n    }\n    invokeQueue = function() {\n      var result;\n      result = normal.apply(module, arguments);\n      if (register.isBootstrap) {\n        register.register(module, method, arguments);\n      }\n      return result;\n    };\n    return invokeQueue;\n  };\n\n  appendModuleRequires = function(moduleName, requires) {\n    var appendList, baseRequires, module, req, _i, _len;\n    module = angular.module(moduleName);\n    baseRequires = module.requires;\n    appendList = [];\n    for (_i = 0, _len = requires.length; _i < _len; _i++) {\n      req = requires[_i];\n      if (baseRequires.indexOf(req) === -1) {\n        appendList.push(req);\n      }\n    }\n    Array.prototype.push.apply(baseRequires, appendList);\n    return module;\n  };\n\n  coverNgModule = function() {\n    var normalModule;\n    normalModule = angular.module;\n    return angular.module = function(name, requires, fn) {\n      var module;\n      if (requires && isRegister(name)) {\n        return appendModuleRequires(name, requires);\n      }\n      module = normalModule(name, requires, fn);\n      if (module.$isProxy) {\n        return module;\n      }\n      return moduleProxy(module);\n    };\n  };\n\n  register.directive(\"body\", [\n    function() {\n      return {\n        restrict: \"E\",\n        compile: function() {\n          return register.isBootstrap = true;\n        }\n      };\n    }\n  ]).provider(\"register\", [\n    \"$provide\", \"$controllerProvider\", \"$compileProvider\", \"$filterProvider\", \"$injector\", \"$animateProvider\", function($provide, $controllerProvider, $compileProvider, $filterProvider, $injector, $animateProvider) {\n      var invokeLater, providerCache, providers, registerFunction, runLater, self;\n      self = this;\n      providerCache = {};\n      providers = {\n        $provide: $provide,\n        $controllerProvider: $controllerProvider,\n        $compileProvider: $compileProvider,\n        $filterProvider: $filterProvider,\n        $injector: $injector,\n        $animateProvider: $animateProvider,\n        getInstanceInjector: function() {\n          return angular.injector();\n        }\n      };\n      invokeLater = function(pname, method) {\n        var provider;\n        provider = providers[pname];\n        if (!provider) {\n          throw new Error(\"badProvider unsupported provider \" + pname);\n        }\n        return function() {\n          var cacheName, name, rs;\n          name = arguments[0];\n          cacheName = \"\" + method + name;\n          if (self.enableDistinst && providerCache[cacheName]) {\n            return;\n          }\n          rs = provider[method].apply(provider, arguments);\n          providerCache[cacheName] = rs;\n        };\n      };\n      runLater = function() {\n        return function() {\n          var args, instance;\n          instance = providers.getInstanceInjector();\n          args = Array.prototype.slice.call(arguments, 0);\n          return instance.invoke(args);\n        };\n      };\n      registerFunction = {\n        provider: invokeLater('$provide', 'provider'),\n        factory: invokeLater('$provide', 'factory'),\n        service: invokeLater('$provide', 'service'),\n        value: invokeLater('$provide', 'value'),\n        constant: invokeLater('$provide', 'constant', 'unshift'),\n        animation: invokeLater('$animateProvider', 'register'),\n        filter: invokeLater('$filterProvider', 'register'),\n        controller: invokeLater('$controllerProvider', 'register'),\n        directive: invokeLater('$compileProvider', 'directive'),\n        config: invokeLater('$injector', 'invoke', 'push', \"_configBlocks\"),\n        run: runLater()\n      };\n      register.register = function(module, method, args) {\n        var rFn;\n        rFn = registerFunction[method];\n        if (!rFn) {\n          throw new Error(\"badFunctioin unsupproted register \" + method);\n        }\n        rFn.apply(this, args);\n      };\n      this.$get = [\n        '$rootElement', function($rootElement) {\n          providers.getInstanceInjector = function() {\n            var instanceInjector;\n            if (instanceInjector) {\n              return;\n            }\n            return instanceInjector = $rootElement.data('$injector') || angular.injector();\n          };\n          return register.register;\n        }\n      ];\n      return this;\n    }\n  ]).run(['register', function(service) {}]);\n\n  coverNgModule();\n\n}).call(this);\n"]}