{"version":3,"sources":["require.js"],"names":["head","requireConfig","requireModule","angular","module","document","getElementsByTagName","setConfig","config","extend","factory","$cacheFactory","provider","getFilePath","getRequireList","list","isArray","isString","push","isObject","forEach","v","k","Array","prototype","apply","fileName","relativePath","baseRequire","findRequire","this","onError","noop","stateName","requireList","getFile","$get","$q","fileCache","$rootScope","ScriptLoad","filePath","deferred","p","defer","$promise","promise","onScriptLoad","resolve","put","$apply","onScriptError","reject","remove","isFunction","get","then","loadScript","url","node","bind","createNode","addEventListener","src","appendChild","createElement","type","charset","async","setAttribute","filepath","run","$fileLoad","call"],"mappings":";CAAA,WACE,GAAIA,GAAMC,EAAeC,CAEzBA,GAAgBC,QAAQC,OAAO,wBAAyB,OAExDJ,EAAOK,SAASC,qBAAqB,QAAQ,GAE7CL,KAEAC,EAAcK,UAAY,SAASC,GAMjC,MAFEP,GAHGO,EAGaL,QAAQM,OAAOR,EAAeO,MAEzCN,GAGTA,EAAcQ,QAAQ,cACpB,gBAAiB,SAASC,GACxB,MAAOA,GAAc,gBAEtBC,SAAS,aACV,WACE,GAAIC,GAAaC,EAAgBF,CAuGjC,OAtGAE,GAAiB,SAASN,GACxB,GAAIO,EACJ,OAAIZ,SAAQa,QAAQR,GACXA,GAETO,KACKP,IAEML,QAAQc,SAAST,GAC1BO,EAAKG,KAAKV,GACDL,QAAQgB,SAASX,KAC1BO,KACAZ,QAAQiB,QAAQZ,EAAQ,SAASa,EAAGC,GAClC,MAAOC,OAAMC,UAAUN,KAAKO,MAAMV,EAAMD,EAAeO,QAGpDN,IAETF,EAAc,SAASa,EAAUC,GAC/B,GAAIC,EAKJ,OAJAA,GAAc1B,EAAc2B,cACxBF,IACFC,EAAcA,EAAYD,IAEvBC,EAGEA,EAAYF,GAFV,IAIXd,EAAWkB,KACXlB,EAASmB,QAAU5B,QAAQ6B,KAC3BpB,EAASL,UAAYL,EAAcK,UACnCK,EAASiB,YAAc,SAASI,GAC9B,GAAIC,EAGJ,OAFAA,GAAcjC,EAAcgC,OAC5BC,EAAcpB,EAAeoB,IAG/BtB,EAASuB,QAAU,aACnBvB,EAASwB,MACP,KAAM,aAAc,aAAc,SAASC,EAAIC,EAAWC,GACxD,GAAIC,EAwDJ,OAvDAA,GAAa,WACX,QAASA,GAAWC,GAClB,GAAIC,GAAUC,CA0Bd,OAzBAD,GAAWL,EAAGO,QACdd,KAAKe,SAAWH,EAASI,QACzBhB,KAAKiB,aAAe,WAClBL,EAASM,QAAQ,KACjBV,EAAUW,IAAIR,EAAUX,KAAKe,UAC7BN,EAAWW,UAEbpB,KAAKqB,cAAgB,WACnBT,EAASU,OAAO,eAChBd,EAAUe,OAAOZ,GACjBF,EAAWW,SACX/C,QAAQmD,WAAW1C,EAASmB,UAAYnB,EAASmB,WAE9CU,GAEOE,EAAIL,EAAUiB,IAAId,IAC5BE,EAAEa,KAAK,WACL,MAAOd,GAASM,YACf,SAAS,WACV,MAAON,GAASU,OAAO,kBAGzBd,EAAUW,IAAIR,EAAUX,KAAKe,UAC7Bf,KAAK2B,WAAWhB,IAThBC,EAASU,OAAO,cAWXtB,KAwBT,MArBAU,GAAWhB,UAAUiC,WAAa,SAASC,GACzC,GAAIC,GAAMR,EAAeJ,CAOzB,OANAI,GAAgBrB,KAAKqB,cAAcS,KAAK9B,MACxCiB,EAAejB,KAAKiB,aAAaa,KAAK9B,MACtC6B,EAAO7B,KAAK+B,aACZF,EAAKG,iBAAiB,OAAQf,GAC9BY,EAAKG,iBAAiB,QAASX,GAC/BQ,EAAKI,IAAML,EACJ1D,EAAKgE,YAAYL,IAG1BnB,EAAWhB,UAAUqC,WAAa,WAChC,GAAIF,EAMJ,OALAA,GAAOtD,SAAS4D,cAAc,UAC9BN,EAAKO,KAAO,kBACZP,EAAKQ,QAAU,QACfR,EAAKS,OAAQ,EACbT,EAAKU,cAAgBV,EAAKU,aAAa,UAAW,QAC3CV,GAGFnB,KAGF5B,EAASuB,QAAU,SAASmC,GACjC,MAAO,IAAI9B,GAAW8B,GAAUzB,YAI/BjC,KAER2D,KAAK,YAAa,SAASC,SAE7BC,KAAK3C","file":"require.min.js","sourcesContent":["(function() {\n  var head, requireConfig, requireModule;\n\n  requireModule = angular.module('angular.lazy.require', ['ng']);\n\n  head = document.getElementsByTagName(\"head\")[0];\n\n  requireConfig = {};\n\n  requireModule.setConfig = function(config) {\n    if (!config) {\n      requireConfig = {};\n    } else {\n      requireConfig = angular.extend(requireConfig, config);\n    }\n    return requireModule;\n  };\n\n  requireModule.factory(\"$fileCache\", [\n    \"$cacheFactory\", function($cacheFactory) {\n      return $cacheFactory(\"fileCache\");\n    }\n  ]).provider(\"$fileLoad\", [\n    function() {\n      var getFilePath, getRequireList, provider;\n      getRequireList = function(config) {\n        var list;\n        if (angular.isArray(config)) {\n          return config;\n        }\n        list = [];\n        if (!config) {\n\n        } else if (angular.isString(config)) {\n          list.push(config);\n        } else if (angular.isObject(config)) {\n          list = [];\n          angular.forEach(config, function(v, k) {\n            return Array.prototype.push.apply(list, getRequireList(v));\n          });\n        }\n        return list;\n      };\n      getFilePath = function(fileName, relativePath) {\n        var baseRequire;\n        baseRequire = requireModule.findRequire();\n        if (relativePath) {\n          baseRequire = baseRequire[relativePath];\n        }\n        if (!baseRequire) {\n          return '';\n        }\n        return baseRequire[fileName];\n      };\n      provider = this;\n      provider.onError = angular.noop;\n      provider.setConfig = requireModule.setConfig;\n      provider.findRequire = function(stateName) {\n        var requireList;\n        requireList = requireConfig[stateName] || [];\n        requireList = getRequireList(requireList);\n        return requireList;\n      };\n      provider.getFile = function() {};\n      provider.$get = [\n        '$q', '$fileCache', '$rootScope', function($q, fileCache, $rootScope) {\n          var ScriptLoad;\n          ScriptLoad = (function() {\n            function ScriptLoad(filePath) {\n              var deferred, p;\n              deferred = $q.defer();\n              this.$promise = deferred.promise;\n              this.onScriptLoad = function() {\n                deferred.resolve(123);\n                fileCache.put(filePath, this.$promise);\n                $rootScope.$apply();\n              };\n              this.onScriptError = function() {\n                deferred.reject('bad request');\n                fileCache.remove(filePath);\n                $rootScope.$apply();\n                angular.isFunction(provider.onError) && provider.onError();\n              };\n              if (!filePath) {\n                deferred.reject('empty path');\n              } else if ((p = fileCache.get(filePath))) {\n                p.then(function() {\n                  return deferred.resolve();\n                })[\"catch\"](function() {\n                  return deferred.reject('bad request');\n                });\n              } else {\n                fileCache.put(filePath, this.$promise);\n                this.loadScript(filePath);\n              }\n              return this;\n            }\n\n            ScriptLoad.prototype.loadScript = function(url) {\n              var node, onScriptError, onScriptLoad;\n              onScriptError = this.onScriptError.bind(this);\n              onScriptLoad = this.onScriptLoad.bind(this);\n              node = this.createNode();\n              node.addEventListener('load', onScriptLoad);\n              node.addEventListener('error', onScriptError);\n              node.src = url;\n              return head.appendChild(node);\n            };\n\n            ScriptLoad.prototype.createNode = function() {\n              var node;\n              node = document.createElement(\"script\");\n              node.type = \"text/javascript\";\n              node.charset = 'utf-8';\n              node.async = true;\n              node.setAttribute && node.setAttribute(\"ng-lazy\", \"load\");\n              return node;\n            };\n\n            return ScriptLoad;\n\n          })();\n          return provider.getFile = function(filepath) {\n            return new ScriptLoad(filepath).$promise;\n          };\n        }\n      ];\n      return provider;\n    }\n  ]).run([\"$fileLoad\", function($fileLoad) {}]);\n\n}).call(this);\n"]}